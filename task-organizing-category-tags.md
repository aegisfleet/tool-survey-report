# カテゴリ/タグ整理指示書

## 目的

- レポート群のカテゴリおよびtagsの語彙を統一し、類似ツール間の関連性（検索・タグページ・比較表）を高める。
- ただし、ツール本来の説明や機能を損なわないよう、保守的で検証可能な変更のみを許可する。

## 作業範囲の制限

**重要**: 1回の作業では以下のいずれか1つのみを実行する：

1. **単一レポート中心の作業**: 1つのレポートファイルを選択し、そのレポートと直接関連する2-3個のレポートのみを対象とする
2. **カテゴリ統一作業**: 特定のカテゴリ（例：「AIコーディング支援」）に属するレポートのみを対象とする
3. **タグ統一作業**: 特定のタグ（例：「エージェント」）を持つレポートのみを対象とする

## 適用対象

- 基本的に `_reports/*.md` のフロントマター（YAML）の `category`、`tags`、および新規追加の `relationships` を対象とする。
- ドキュメント本文の内容は原則不変更。タグと関連付けによる関連度向上が目的。

### 定義（標準語彙）

- **カテゴリ（推奨の正規化語）**
  - **AIコーディング支援**: AI技術を使ったコード生成・補完ツール
  - **自律型AIエージェント**: 自律的にタスクを実行するAIシステム
  - **AIコードエディタ**: AI機能が統合されたコードエディタ
  - **開発者ツール**: 開発プロセスを支援する汎用ツール
  - **CI/CD**: 継続的インテグレーション・デプロイメントツール
  - **バージョン管理**: ソースコードの変更履歴管理ツール
  - **テスト/QA**: テスト自動化・品質保証ツール
  - **データ可視化**: データの視覚化・分析ツール
  - **インフラ/クラウド**: インフラ管理・クラウドサービス

- **タグ（推奨セット、小文字/大文字混在を避ける）**
  - **AI関連**: AI, エージェント, 自律型, コード生成, 機械学習
  - **開発関連**: コーディング支援, 開発者ツール, IDE, CLI, API
  - **プロセス関連**: CI/CD, 自動化, テスト, デプロイ, 監視
  - **技術関連**: セキュリティ, クラウド, コンテナ, マイクロサービス
  - **その他**: 日本語対応, オープンソース, エンタープライズ

- **レポート関連付け（relationships）**
  - **目的**: レポート間の階層関係や関連性を明示し、ユーザーが関連ツールを発見しやすくする
  - **構造**: 以下の3つのフィールドで構成される階層的関連付けシステム

    ```yaml
    relationships:
      parent: "tool_name"        # 親レポート（1つのみ）
      children:                  # 子レポート（複数可）
        - "tool_name1"
        - "tool_name2"
      related_tools:             # 関連レポート（複数可）
        - "tool_name3"
        - "tool_name4"
    ```
  
  - **各フィールドの定義**:
    - **parent**: このツールの上位概念や基盤となるツール（例：GitHub Copilotの親はGitHub）
    - **children**: このツールから派生した、または密接に関連する下位ツール（例：GitHubの子はGitHub Copilot）
    - **related_tools**: 同等レベルで関連性の高いツール（競合製品、代替ツール、補完ツールなど）
  
  - **参照方法**: 全て各レポートのフロントマターで定義された `tool_name` の値（文字列）で参照する
    - 例： `_reports/github-copilot.md` の `tool_name: "GitHub Copilot"` → `"GitHub Copilot"`
    - 例： `_reports/gitlab-duo.md` の `tool_name: "GitLab Duo"` → `"GitLab Duo"`

### ルール（変更ポリシー）

1. 最小変更: 既存の `category` が意味的に近い場合は上書きせず、補助的な `tags` を追加して関連づける。
2. カテゴリ変更が必要と判断する基準:
   - 現行カテゴリが曖昧で、より正規化カテゴリに置き換えることで検索性が明確に向上する場合。
   - ただし、置換前に必ず1名のレビュアー承認を求める（自動化されていない場合は PR を作成）。
3. タグ追加は保守的に行う。ツールが明確にその特徴を持つ場合のみ追加する（例: "Agent Mode" を持つツールには `エージェント` を追加）。
4. 統一表記: 同義の英語/日本語タグが混在している場合は日本語に統一する（例: "Agent" -> "エージェント"）。
5. キーワード衝突回避: 既にタグ数が多い場合は関連性の高い上位3つに絞る。

#### レポート関連付け（relationships）のルール

1. **関連付けの基準**:
   - **parent**: 明確な階層関係がある場合のみ設定（例：プラットフォームとその機能、基盤ツールと拡張機能）
   - **children**: 直接的な派生関係や密接な統合関係がある場合のみ設定
   - **related_tools**: 同じ問題領域を解決する競合ツール、補完的なツール、代替ツールを設定

2. **関連付けの妥当性確認**:
   - 参照先のレポートファイルが実際に存在することを確認
   - 双方向の関連性を考慮（AがBの親なら、BはAの子として設定）
   - 循環参照を避ける（A→B→A のような関係は禁止）

3. **関連付けの優先順位**:
   - **高優先度**: 公式に関連が明示されているツール（同一開発元、公式統合など）
   - **中優先度**: 機能的に密接に関連するツール（同じ用途、類似機能）
   - **低優先度**: 間接的に関連するツール（同じ技術スタック、同じ業界など）

4. **関連付けの数の制限**:
   - **parent**: 1つのみ（複数の親は設定しない）
   - **children**: 最大5つまで（多すぎる場合は最も関連性の高いものを選択）
   - **related_tools**: 最大7つまで（ユーザビリティを考慮した適切な数に制限）

### チェックリスト（編集前）

- [ ] フロントマターが YAML 形式で正しくパースできる
- [ ] **ツールの正確な特定**: 公式サイトや信頼できる情報源でツールの主要機能を確認済み
- [ ] **カテゴリの妥当性**: 業界標準の分類と一致している（例：CI/CDツール、バージョン管理ツール、IDEなど）
- [ ] **機能との整合性**: 追加するタグが本文中の記述（機能説明）と整合している
- [ ] **類似ツールとの一貫性**: 同じカテゴリの他のツールと分類が一貫している
- [ ] **関連付けの妥当性**: relationships フィールドの各参照が適切で、参照先ファイルが存在する
- [ ] **関連付けの双方向性**: parent/children の関係が双方向で整合している
- [ ] **循環参照の回避**: relationships に循環参照がないことを確認
- [ ] 変更点は最小である（カテゴリ変更は最小限）
- [ ] 変更一覧を変更コミットメッセージに明記する（例: "standardize tags: add エージェント to github-copilot, add relationships"）
- [ ] `task-organizing-category-tags.md` の進捗状況セクションを更新

## 実務手順（段階的アプローチ）

### ステップ1: 作業対象の選定

以下のいずれか1つを選択する：

- **オプションA**: 特定の1レポートを中心とした関連レポート群（最大4ファイル）
- **オプションB**: 特定カテゴリのレポート群（最大5ファイル）
- **オプションC**: 特定タグの統一作業（最大5ファイル）

### ステップ2: 事前確認とツール調査

1. **対象ファイル数の確認**: `ls _reports/ | grep -E "(対象パターン)" | wc -l`
2. **現在のタグ/カテゴリ状況の把握**: `grep -h "^tags:\|^category:" _reports/対象ファイル*.md`
3. **既存の関連付け状況の確認**: `grep -A 10 "^relationships:" _reports/対象ファイル*.md`
4. **ツールの正確な特定と調査**:
   - 公式サイトでツールの主要機能を確認
   - ツールの説明文書（README、About）を読み、主要な用途を特定
   - 類似ツールとの比較情報を調査
   - 業界での一般的な分類を確認（例：「GitHub Actions」→「CI/CD」、「Git」→「バージョン管理」）
   - **関連ツールの特定**: 同一開発元、公式統合、競合製品、代替ツールを調査
5. **参照先ファイルの存在確認**: 関連付けで参照予定のツール名に対応するレポートファイルが存在するかチェック
6. **作業ログファイルの作成**: `echo "作業開始: $(date)" > work-log-$(date +%Y%m%d).txt`

### ステップ3: 安全な変更実行

1. **バックアップ作成**: 対象ファイルを `.bak` 拡張子でコピー
2. **1ファイルずつ変更**: 一度に1ファイルのみ編集し、即座にYAMLチェック実行
3. **変更内容の記録**: 各変更を作業ログに記録
4. **中間確認**: 3ファイル変更後に一度全体の整合性をチェック

### ステップ4: 検証とコミット

1. **YAML構文チェック**: 全対象ファイルのパース確認
2. **関連付けの整合性チェック**:
   - 参照先ファイルの存在確認: `ls _reports/参照先tool_name.md`
   - 双方向関係の確認: parent/children の関係が双方で設定されているかチェック
   - 循環参照の確認: A→B→A のような循環がないかチェック
3. **変更差分の確認**: `git diff` で意図しない変更がないかチェック
4. **コミット**: 変更内容を明確に記述したメッセージでコミット

### ステップ5: 進捗の記録

1. **進捗状況の更新**: このファイル(`task-organizing-category-tags.md`)の末尾にある`進捗状況`セクションに、実施した作業内容を簡潔に記載する。

## 間違いを防ぐための詳細手順

### ツール分類の正確性確保

1. **公式情報の確認**:
   - ツールの公式サイトで「About」「Features」セクションを確認
   - 公式ドキュメントの「Getting Started」や「Overview」を読む
   - 開発元が公式に使用している分類用語を特定

2. **機能ベースの分類**:
   - **主要機能**: ツールが解決する主要な問題を特定
   - **利用シーン**: 実際の使用場面を確認
   - **ターゲットユーザー**: 想定されているユーザー層を把握

3. **業界標準との照合**:
   - 同種のツールがどのように分類されているかを確認
   - 技術系メディアや比較サイトでの分類を参考にする
   - Stack Overflow、GitHub、技術ブログでの言及を調査

4. **分類例の明確化**:
   - **CI/CD**: GitHub Actions, Jenkins, GitLab CI, CircleCI
   - **バージョン管理**: Git, GitHub, GitLab, Subversion
   - **AIコーディング支援**: GitHub Copilot, Cursor, CodeT5
   - **IDE/エディタ**: VS Code, IntelliJ IDEA, Vim
   - **テストツール**: Jest, Pytest, Selenium, Cypress

### 誤分類を防ぐ検証手順

1. **複数機能ツールの扱い**:
   - 主要機能を特定し、それに基づいてカテゴリを決定
   - 副次的機能はタグで表現する
   - 例：GitHubは「バージョン管理」が主、「CI/CD」「コラボレーション」はタグ

2. **曖昧なケースの判断基準**:
   - ツールの公式な自己紹介文を最優先
   - ユーザーの主要な利用目的を考慮
   - 市場での一般的な認識を重視

3. **変更前の検証**:
   - 既存の分類が明らかに間違っている場合のみ変更
   - 疑わしい場合は追加調査を実施
   - 不明な場合は現状維持し、タグで補完

## 安全ガード（例外・回復）

### エラー対応手順

1. **YAML構文エラー**: 即座に `.bak` ファイルから復元し、エラー原因を特定
2. **意図しない変更**: `git checkout -- ファイル名` で即座にリバート
3. **分類に確信が持てない場合**: 変更を保留し、追加調査を実施
4. **作業中断**: 作業ログに中断理由を記録し、次回作業時に継続可能な状態を維持

### 作業継続の判断基準

- 3ファイル以上でエラーが発生した場合は作業を中断
- 1つのファイルで2回以上エラーが発生した場合は該当ファイルをスキップ
- ツールの分類に確信が持てない場合は現状維持
- 作業時間が30分を超えた場合は一度中断して進捗を確認

## 作業例（段階的アプローチ）

### 例1: 単一レポート中心の作業

**対象**: `_reports/jules.md` + 関連する自律型AIツール2-3個

**作業前の確認**:

```bash
grep -l "自律\|エージェント\|Agent" _reports/*.md | head -4
```

**変更例**:

- メインファイル `jules.md`:
  - 変更前 tags: `["AI", "開発者ツール", "コーディング支援", "CLI", "自律型エージェント"]`
  - 変更後 tags: `["AI", "エージェント", "自律型", "コーディング支援", "開発者ツール", "CLI"]`
  - 関連付け追加:

    ```yaml
    relationships:
      related_tools:
        - "devin"
        - "openhands"
        - "github-copilot"
    ```

- 関連ファイル: 同様の統一ルールを適用し、双方向の関連付けを設定（最大3ファイル）

### 例2: カテゴリ統一作業

**対象**: `category: "AIコーディング支援"` のレポート群のみ

**作業前の確認**:

```bash
grep -l "category.*AI.*コーディング" _reports/*.md
```

## レポート関連付けの具体例

### 例1: GitHubエコシステムの関連付け

```yaml
# _reports/github.md
relationships:
  children:
    - "github-copilot"
    - "github-actions"
  related_tools:
    - "gitlab"
    - "bitbucket"

# _reports/github-copilot.md  
relationships:
  parent: "github"
  related_tools:
    - "cursor"
    - "gitlab-duo"
    - "coderabbit"
```

### 例2: CI/CDツールの関連付け

```yaml
# _reports/jenkins.md
relationships:
  related_tools:
    - "github-actions"
    - "gitlab-ci"
    - "circleci"

# _reports/github-actions.md
relationships:
  parent: "github"
  related_tools:
    - "jenkins"
    - "gitlab-ci"
```

### 例3: AIコーディング支援ツールの関連付け

```yaml
# _reports/cursor.md
relationships:
  related_tools:
    - "github-copilot"
    - "coderabbit"
    - "tabnine"

# _reports/devin.md
relationships:
  related_tools:
    - "openhands"
    - "jules"
    - "github-copilot"
```

### 関連付けの判断基準（詳細ガイド）

#### parent/children 関係の設定基準

- **同一開発元の製品**: GitHub → GitHub Copilot, GitLab → GitLab Duo
- **プラットフォームと機能**: AWS → AWS CodeCommit, Azure → Azure DevOps
- **基盤ツールと拡張**: Git → GitHub/GitLab, Docker → Docker Compose

#### related_tools の設定基準

- **直接競合**: GitHub Copilot ↔ Cursor ↔ GitLab Duo（同じ機能を提供）
- **補完関係**: GitHub Actions ↔ Jenkins（CI/CDの選択肢）
- **代替ツール**: Git ↔ Mercurial（同じ問題を異なる方法で解決）
- **統合可能**: VS Code ↔ GitHub Copilot（よく一緒に使用される）

#### 関連付けを避けるべきケース

- **間接的すぎる関係**: Docker と Kubernetes（関連はあるが直接的でない）
- **異なる問題領域**: テストツールとデプロイツール（用途が異なる）
- **一時的な関係**: 単発のコラボレーションや統合

## 進捗状況

- **2025-10-25**:
  - **作業内容**: AIコーディング支援ツールのカテゴリとタグを標準化。
  - **対象ファイル**:
    - `_reports/coderabbit.md`
    - `_reports/github-copilot.md`
    - `_reports/cursor.md`
    - `_reports/openhands.md`
    - `_reports/devin.md`
  - **変更概要**:
    - `coderabbit.md`: `tags` を `["AI", "コーディング支援", "コードレビュー", "自動化"]` に標準化。
    - `cursor.md`: `tags` を `["AI", "コーディング支援", "コードエディタ", "IDE"]` に標準化。
    - `github-copilot.md`, `openhands.md`, `devin.md` は変更不要であることを確認。
- **2025-10-26**:
  - **作業内容**: AI関連ツールのカテゴリ統一と関連付けの追加。
  - **対象ファイル**:
    - `_reports/kiro.md`
    - `_reports/cline.md`
    - `_reports/openai-codex.md`
  - **変更概要**:
    - `kiro.md`: `category` を `AI IDE` から `AIコードエディタ` に変更。
    - `cline.md`: `category` を `AIコーディングエージェント` から `自律型AIエージェント` に変更し、`tags` を標準化。`relationships` を追加。
    - `openai-codex.md`: `category` を `AIコーディングエージェント` から `AIコーディング支援` に変更し、`tags` を標準化。`relationships` を追加。
- **2025-10-26**:
  - **作業内容**: 勤怠管理ツールのカテゴリとタグを標準化。
  - **対象ファイル**:
    - `_reports/king-of-time.md`
    - `_reports/jobcan-kinmu-kanri.md`
  - **変更概要**:
    - `king-of-time.md`: `category` を `勤怠管理システム` から `勤怠管理` に変更。
    - `jobcan-kinmu-kanri.md`: `tags` の `労務管理` を `人事労務` に変更。
