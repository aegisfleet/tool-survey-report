---
layout: default
title: "タグ一覧"
description: "タグ別にレポートを閲覧できます"
---

<div class="tags-index-container">
  <header class="page-header">
    <h1>タグ一覧</h1>
    <p class="page-description">タグ別にレポートを閲覧できます。興味のあるトピックを選んでください。</p>
  </header>

  <div class="tags-overview">
    <div class="tags-stats">
      {% assign all_tags = site.reports | map: 'tags' | join: ',' | split: ',' | uniq | sort %}
      {% assign tag_count = all_tags | size %}
      <span class="stat-item">
        <strong>{{ tag_count }}</strong> 個のタグ
      </span>
      <span class="stat-item">
        <strong>{{ site.reports.size }}</strong> 個のレポート
      </span>
    </div>
  </div>

  <div class="tags-grid">
    {% for tag in all_tags %}
      {% if tag != '' %}
        {% assign tagged_reports = site.reports | where_exp: "report", "report.tags contains tag" %}
        {% assign tag_count = tagged_reports | size %}
        <div class="tag-card">
          <div class="tag-header">
            <h2 class="tag-name">{{ tag }}</h2>
            <span class="tag-count">{{ tag_count }} 件</span>
          </div>
          
          <div class="tag-reports">
            {% assign recent_reports = tagged_reports | sort: 'date' | reverse | limit: 3 %}
            {% for report in recent_reports %}
              <div class="tag-report-item">
                <a href="{{ report.url | relative_url }}" class="report-link">
                  {{ report.title }}
                </a>
                <time class="report-date">{{ report.date | date: "%Y/%m/%d" }}</time>
              </div>
            {% endfor %}
            
            {% if tag_count > 3 %}
              <div class="more-reports">
                <a href="{{ '/reports/' | relative_url }}?tag={{ tag | url_encode }}" class="view-all-link">
                  他 {{ tag_count | minus: 3 }} 件を見る →
                </a>
              </div>
            {% endif %}
          </div>
          
          <div class="tag-actions">
            <a href="{{ '/reports/' | relative_url }}?tag={{ tag | url_encode }}" class="tag-view-all">
              すべて見る
            </a>
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>

  {% if all_tags.size == 0 %}
    <div class="no-tags">
      <p>まだタグが設定されたレポートがありません。</p>
    </div>
  {% endif %}

  <div class="back-to-reports">
    <a href="{{ '/reports/' | relative_url }}" class="back-link">← レポート一覧に戻る</a>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Handle URL parameters for tag filtering
  const urlParams = new URLSearchParams(window.location.search);
  const tagParam = urlParams.get('tag');
  
  if (tagParam) {
    // If a tag parameter is present, redirect to reports page with filter
    window.location.href = '/reports/?tag=' + encodeURIComponent(tagParam);
  }
});
</script>